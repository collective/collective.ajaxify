"use strict";(self.webpackChunkcollective_ajaxify=self.webpackChunkcollective_ajaxify||[]).push([[1306],{1306:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});var n=a(35686),s=a.n(n);class r{constructor(e){this.el=e}updatezebra(e){e.find("tr:visible:odd").removeClass("odd even").addClass("odd"),e.find("tr:visible:even").removeClass("odd even").addClass("even")}initStatusMessageArea(){if(document.getElementById("portalMessagesWrapper"))return;let e=document.createElement("div");e.id="portalMessagesWrapper",document.getElementById("content").insertAdjacentElement("afterbegin",e)}addStatusMessage(e,t){void 0===t&&(t="info");let a=document.createElement("dl"),n=document.createElement("dt"),s=document.createElement("dd");a.classList.add("alert","alert-"+t),n.innerText=t,s.innerText=e,a.appendChild(n),a.appendChild(s);let r=document.getElementById("portalMessagesWrapper");r&&(r.innerHTML="",r.appendChild(a))}init(){let e=this;e.initStatusMessageArea(),s()(".btn-rule-action").off("click").on("click",function(t){t.preventDefault();var a=s()(this),n=this,r=a.parents("tr").first(),l=r.parent(),d=a.data("value"),i=a.data("url");s().ajax({type:"POST",url:i,data:{"rule-id":d,_authenticator:s()('input[name="_authenticator"]').val()},beforeSend:function(){s()("#spinner").show()},error:function(){e.addStatusMessage(s()("#trns_form_error").html(),"warn")},success:function(){let t="";t=r.find(".rule-title")[0].innerText,a.hasClass("btn-rule-enable")&&(r.removeClass("state-disabled").addClass("state-enabled"),n.parentNode.querySelector(".btn-rule-enable").classList.add("d-none"),n.parentNode.querySelector(".btn-rule-disable").classList.remove("d-none"),e.addStatusMessage(s()("#trns_form_success_enabled").html()+": "+t,"info")),a.hasClass("btn-rule-disable")&&(r.removeClass("state-enabled").addClass("state-disabled"),n.parentNode.querySelector(".btn-rule-disable").classList.add("d-none"),n.parentNode.querySelector(".btn-rule-enable").classList.remove("d-none"),e.addStatusMessage(s()("#trns_form_success_disabled").html()+": "+t,"info")),a.hasClass("btn-rule-delete")&&(r.remove(),e.updatezebra(l),e.addStatusMessage(s()("#trns_form_success_deleted").html()+": "+t,"info"))},complete:function(){s()("#spinner").hide()}})}),s()(".filter-option input").off("change").on("change",function(){var t=s()("#rules_table_form table"),a=s()(".state-filters input:checked"),n=s()(".type-filters input:checked");t.find("tr").show(),a.length>0&&s()(".state-filters input:not(:checked)").each(function(){t.find("."+this.id).hide()}),n.length>0&&s()(".type-filters input:not(:checked)").each(function(){t.find("."+this.id).hide()}),e.updatezebra(t)}),s()("#rules_disable_globally").on("change",function(){var t=s()("#fieldset-global form"),a="";s()("#rules_disable_globally")[0].checked&&(a="True"),s().ajax({type:"POST",url:t.attr("action"),data:{"global_disable:boolean":a,_authenticator:s()('input[name="_authenticator"]').val()},beforeSend:function(){s()("#spinner").show()},error:function(){e.addStatusMessage(s()("#trns_form_error").html(),"warn")},success:function(){e.addStatusMessage(s()("#trns_form_success").html(),"info")},complete:function(){s()("#spinner").hide()}})})}}}}]);
//# sourceMappingURL=1306.f3eb07cf5a61f0780526.min.js.map